import random
import string
import time

def gerar_senha():
    """Gera uma senha forte baseada nas prefer√™ncias do usu√°rio."""

    # --- 1. Defini√ß√£o dos conjuntos de caracteres ---
    # Come√ßamos com letras min√∫sculas por padr√£o
    caracteres = string.ascii_lowercase

    # --- 2. Coleta de Configura√ß√µes ---
    print("‚ú® Gerador de Senhas Seguras ‚ú®")
    
    # Define o comprimento da senha (com tratamento de erro)
    while True:
        try:
            comprimento = int(input("\nDigite o comprimento desejado da senha (ex: 12): "))
            if comprimento <= 0:
                print("O comprimento deve ser um n√∫mero positivo. Tente novamente.")
                continue
            break
        except ValueError:
            print("Entrada inv√°lida. Por favor, digite um n√∫mero inteiro.")

    # Op√ß√µes para inclus√£o de outros tipos de caracteres
    incluir_maiusculas = input("Incluir letras mai√∫sculas? (s/n): ").lower().startswith('s')
    incluir_numeros = input("Incluir n√∫meros? (s/n): ").lower().startswith('s')
    incluir_simbolos = input("Incluir s√≠mbolos (ex: !@#$%&*)? (s/n): ").lower().startswith('s')

    # --- 3. Constru√ß√£o do Conjunto Final de Caracteres ---

    if incluir_maiusculas:
        caracteres += string.ascii_uppercase
    if incluir_numeros:
        caracteres += string.digits
    if incluir_simbolos:
        # Punctuation inclui a maioria dos s√≠mbolos comuns
        caracteres += string.punctuation 
    
    # Verifica√ß√£o de seguran√ßa: se nenhuma op√ß√£o foi selecionada (e s√≥ tiver min√∫sculas)
    if not incluir_maiusculas and not incluir_numeros and not incluir_simbolos and comprimento > len(string.ascii_lowercase):
        print("\nAten√ß√£o: Voc√™ s√≥ selecionou letras min√∫sculas. A senha pode ser fraca.")
    
    # Garante que h√° caracteres suficientes para o comprimento desejado
    if not caracteres:
        print("\nErro: Nenhum tipo de caractere foi selecionado. Tente novamente.")
        return

    # --- 4. Gera√ß√£o da Senha ---

    # random.choice(caracteres) escolhe um elemento aleat√≥rio da string 'caracteres'
    # O loop faz isso 'comprimento' vezes
    senha = ''.join(random.choice(caracteres) for _ in range(comprimento))

    # --- 5. Exibi√ß√£o e Encerramento ---
    print("\n" + "="*40)
    print(f"üéâ Sua senha segura ({comprimento} caracteres):")
    print(f"‚û°Ô∏è **{senha}**")
    print("="*40)
    time.sleep(1) # Pausa para dar tempo do usu√°rio ver a senha
    print("\nN√£o se esque√ßa de salvar sua senha em um gerenciador seguro!")

# Execu√ß√£o do script
if __name__ == "__main__":
    gerar_senha()
